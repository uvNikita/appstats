{% macro draw_table(table, fields, sort_by_field, sort_by_period, number_of_lines) -%}
    <table class="table table-bordered table-striped table-condensed">
        <thead>
            <tr>
                {% if sort_by_field == 'name' %}
                    <th> name </th>
                {% else %}
                    <th> <a href="{{ url_for('main_page', sort_by_field='name', sort_by_period='hour', number_of_lines=number_of_lines) }}"> name </a> </th>
                {% endif %}
                {% for field in fields %}
                    <th></th>
                    <th COLSPAN=3> {{ field }} </th>
                {% endfor %}
            </tr>
        </thead>
            <tr>
                <td> </td>
                {% for field in fields %}
                        <td></td>
                        {% if field == sort_by_field and sort_by_period == 'hour' %}
                            <td> H </td>
                        {% else %}
                            <td> <a href="{{ url_for('main_page', sort_by_field=field, sort_by_period='hour', number_of_lines=number_of_lines) }}"> H </a> </td>
                        {% endif %}
                        {% if field == sort_by_field and sort_by_period == 'hour_aver' %}
                            <td> &ltH&gt </td>
                        {% else %}
                            <td> <a href="{{ url_for('main_page', sort_by_field=field, sort_by_period='hour_aver', number_of_lines=number_of_lines) }}"> &ltH&gt </a> </td>
                        {% endif %}
                        {% if field == sort_by_field and sort_by_period == 'day_aver' %}
                            <td> &ltD&gt </td>
                        {% else %}
                            <td> <a href="{{ url_for('main_page', sort_by_field=field, sort_by_period='day_aver', number_of_lines=number_of_lines) }}"> &ltD&gt </a> </td>
                        {% endif %}
                {% endfor %}
            </tr>
            <tbody>
                {% for record in table %}
                    <tr>
                        <td> {{ record['name'] }} </td>     
                        {% for field in fields %}
                                <td></td>
                                <td> {{ record['%s_%s' % (field, 'hour')] }} </td>     
                                <td> {{ record['%s_%s' % (field, 'hour_aver')] }} </td>     
                                <td> {{ record['%s_%s' % (field, 'day_aver')] }} </td>     
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
    </table>
{%- endmacro %}
