<!doctype html>
<html>
    <head>
        <title>Statistics</title>
        <link rel=stylesheet type=text/css href='{{ url_for('static', filename='css/bootstrap.css') }}'>
    </head>
    <body>
        <a href={{ url_for('main_page') }} class='btn'>Home</a>
        <form>
            <input name='name' type='text' value='{{ name }}' class='invisible'/>
            <span class="btn-group" type='radio' data-toggle="buttons-radio" onchange='this.form.submit()'>
                <button name='hours' value=6 class="btn {{ 'active' if hours == 6 else ''}}">6 hours</button>
                <button name='hours' value=12 class="btn {{ 'active' if hours == 12 else ''}}">12 hours</button>
                <button name='hours' value=24 class="btn {{ 'active' if hours == 24 else ''}}">1 day</button>
                <button name='hours' value=144 class="btn {{ 'active' if hours == 144 else ''}}">6 days</button>
                <button name='hours' value=720 class="btn {{ 'active' if hours == 720 else ''}}">30 days</button>
            </span>
            <select name='field' onchange='this.form.submit()'>
                {% for field in fields %}
                    <option {{ 'selected' if field == selected_field else ''}}> {{ field }} </option>
                {% endfor %}
            </select>
        </form>
        <div style='height: 400px; ' id='graph'></div>

        <script src='{{ url_for('static', filename='js/flotr2.js') }}'></script>
        <script>
            function basic_time(container, data, field, name) {
                var options;

                options = {
                    xaxis : {
                        mode : 'time', 
                        labelsAngle : 45,
                        timeMode : 'local'
                    },
                    yaxis : {
                        autoscale : true
                    },
                    title : name
                };
                      
                Flotr.draw(
                    container,
                    [{ data : data, label : field, lines : { fill : true } }],
                    options
                );

            }

            container = (document.getElementById('graph'));
            basic_time(container, {{ data }}, '{{ selected_field }}', '{{ name }}');
        </script>
        <script src='{{ url_for('static', filename='js/bootstrap.js') }}'></script>
    </body>
</html>
